# AutoCut Director - 用户指南

## 快速开始

### 1. 启动服务器

```bash
cd autocut-director
python run_server.py
```

服务器将在 `http://localhost:8787` 启动。

### 2. 打开用户界面

在浏览器中访问: **http://localhost:8787/**

## 使用流程

### 步骤 1: 上传视频

1. **上传视频**
   - 拖拽视频文件到上传区域
   - 或点击上传区域选择文件
   - 支持格式: MP4, MOV, AVI（最大 2GB）

2. **选择目标平台**
   - 抖音（竖屏 9:16）
   - B站（横屏 16:9）
   - YouTube（横屏 16:9）
   - 快手（竖屏 9:16）

3. **选择视频风格**
   - 🔥 **爆款风格**: 快节奏、强视觉、适合短视频
   - 📚 **教学风格**: 清晰完整、适合知识分享
   - 💝 **情感风格**: 温暖感人、适合故事叙事
   - 📹 **Vlog 风格**: 自然真实、适合生活记录

4. 点击 **✨ 开始 AI 剪辑**

### 步骤 2: 处理中

系统会自动完成以下步骤：

1. ✓ **视频已导入** - 上传并解析视频文件
2. ▶ **音频分析中** - 使用 AI 进行语音识别
3. ○ **场景拆分** - 智能检测场景切换点
4. ○ **AI 生成剪辑方案** - 根据风格生成剪辑脚本
5. ○ **自动剪辑** - 在 DaVinci Resolve 中执行剪辑

**进度信息**:
- 进度条显示整体进度
- 已用时 / 预计剩余时间
- 可展开查看详细日志（高级用户）

**预计时间**: 3-5 分钟（取决于视频长度）

### 步骤 3: 预览 & 修改

1. **视频预览**
   - 播放器中查看剪辑效果
   - 低码率预览（480p），加载快速

2. **剪辑方案摘要**
   - 开头 Hook: 使用的开场片段
   - 节奏: 快/中/慢
   - BGM: 背景音乐类型和 BPM
   - 总时长: 最终视频长度

3. **调整选项**（意图式调整）
   - 🔥 **Hook 更狠**: 使用更强烈的开场
   - 💝 **Hook 更温和**: 使用更柔和的开场
   - ⚡ **节奏更快**: 加快剪辑节奏
   - 🐢 **节奏更慢**: 放慢剪辑节奏
   - 🎵 **换一首音乐**: 更换背景音乐
   - 📝 **字幕更大**: 增大字幕尺寸

4. **操作按钮**
   - **← 重新开始**: 返回步骤 1
   - **✓ 满意，导出成片**: 进入导出步骤

### 步骤 4: 导出 & 管理

1. **选择导出质量**
   - 📱 **1080p**: 1080×1920（适合抖音/快手）
   - 🖥️ **4K**: 3840×2160（高清质量）

2. **下载成片**
   - 导出完成后点击 **💾 下载成片**

3. **历史版本**
   - 查看之前的版本
   - 可以加载历史版本重新编辑

4. **项目管理**
   - 🗑️ **删除项目**: 删除当前项目及所有文件
   - ➕ **创建新项目**: 开始新的剪辑项目

## 常见问题

### Q: 视频上传失败怎么办？
A: 
- 检查视频文件大小（不超过 2GB）
- 检查视频格式（支持 MP4, MOV, AVI）
- 检查网络连接

### Q: 处理时间太长怎么办？
A: 
- 处理时间取决于视频长度和复杂度
- 可以查看详细日志了解当前进度
- 如果超过 10 分钟，可能需要检查系统状态

### Q: 预览视频无法播放？
A: 
- 检查浏览器是否支持 MP4 格式
- 尝试刷新页面
- 检查服务器是否正常运行

### Q: 调整选项不生效？
A: 
- 等待处理完成（按钮会显示"✓ 已应用"）
- 刷新预览查看效果
- 如果仍不满意，可以多次调整

### Q: 如何查看 API 文档？
A: 
- 访问 http://localhost:8787/admin
- 或直接访问 http://localhost:8787/docs
- 这是开发者专用的 Swagger UI

## 技术说明

### 系统架构
- **前端**: HTML + CSS + JavaScript
- **后端**: FastAPI + Python
- **AI**: DeepSeek API（语音识别 + 剪辑方案生成）
- **剪辑**: DaVinci Resolve 19

### 数据流程
1. 用户上传视频 → 服务器保存
2. 提取音频 → Whisper 语音识别
3. 场景检测 → 生成场景切点
4. AI 生成 DSL → 剪辑指令脚本
5. Resolve 执行 → 自动剪辑
6. 导出成片 → 用户下载

### 文件存储
- 所有文件存储在 `jobs/{job_id}/` 目录
- `input/`: 原始视频和音频
- `temp/`: 临时文件和预览
- `output/`: 最终成片

## 开发者指南

### API 访问
- **Swagger UI**: http://localhost:8787/docs
- **API 端点**: http://localhost:8787/api/

### 主要 API
- `POST /api/ingest/` - 上传视频
- `POST /api/llm/generate-dsl` - 生成剪辑方案
- `POST /api/execute/run` - 执行剪辑
- `GET /api/jobs/{job_id}` - 获取 job 状态
- `GET /api/jobs/{job_id}/preview` - 获取预览视频

### 自定义风格
可以在 `/api/llm/style-presets` 查看和修改预设风格。

## 更新日志

### v1.4.0 (2026-02-05)
- ✅ 新增流程式用户 UI
- ✅ 隐藏技术细节（job_id, API 名称）
- ✅ 意图式调整功能
- ✅ 时间线式进度展示
- ✅ 预览视频播放
- ✅ 历史版本管理

### v1.3.0
- ✅ BGM 库管理系统
- ✅ DeepSeek API 集成
- ✅ 音频音量控制

### v1.2.0
- ✅ DSL Schema 验证
- ✅ Iron Rules 检查
- ✅ 字幕渲染系统

## 支持

如有问题或建议，请查看:
- `ARCHITECTURE.md` - 系统架构
- `API_USAGE.md` - API 使用指南
- `QUICKSTART.md` - 快速开始指南
