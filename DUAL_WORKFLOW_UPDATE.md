# åŒå·¥ä½œæµ + Resolve è‡ªåŠ¨å¯¼å…¥ - æ›´æ–°å®Œæˆ

## ğŸ“‹ æ›´æ–°å†…å®¹

### âœ… 1. åŒå…¥å£æ¨¡å¼

#### æœ¬åœ°æ–‡ä»¶é€‰æ‹©ï¼ˆæ¨èï¼‰
- **ä¼˜åŠ¿**: æ— éœ€ä¸Šä¼ ï¼Œå¤„ç†æ›´å¿«
- **ä½¿ç”¨**: ç›´æ¥é€‰æ‹©æœ¬åœ°æ–‡ä»¶è·¯å¾„
- **é™åˆ¶**: æ— 

#### ä¸Šä¼ æ–‡ä»¶æ¨¡å¼
- **ä¼˜åŠ¿**: æ”¯æŒè¿œç¨‹è®¿é—®
- **ä½¿ç”¨**: æ‹–æ‹½æˆ–é€‰æ‹©æ–‡ä»¶ä¸Šä¼ 
- **é™åˆ¶**: æœ€å¤§ 2GB

### âœ… 2. Script Assembly å·¥ä½œæµ

#### é›¶æ•£é•œå¤´ç»„è£…æ¨¡å¼
- **è¾“å…¥**: `assets_manifest.json` + å¯é€‰ `script_outline.json`
- **ç‰¹ç‚¹**: ä½¿ç”¨ `asset_id` ä»£æ›¿ `scene_id`
- **é€‚ç”¨**: å¤šä¸ªè§†é¢‘ç‰‡æ®µç»„è£…æˆå®Œæ•´è§†é¢‘

#### å·¥ä½œæµå¯¹æ¯”

| ç‰¹æ€§ | å•è§†é¢‘å‰ªè¾‘ | é›¶æ•£é•œå¤´ç»„è£… |
|------|-----------|-------------|
| è¾“å…¥ | ä¸€ä¸ªå®Œæ•´è§†é¢‘ | å¤šä¸ªè§†é¢‘ç‰‡æ®µ |
| åœºæ™¯è¯†åˆ« | è‡ªåŠ¨æ£€æµ‹ | ä½¿ç”¨ asset_id |
| è¯­éŸ³è¯†åˆ« | è‡ªåŠ¨ ASR | å¯é€‰ |
| ç»„è£…é€»è¾‘ | AI è‡ªåŠ¨ | è„šæœ¬å¤§çº²æŒ‡å®š |
| é€‚ç”¨åœºæ™¯ | é•¿è§†é¢‘å‰ªè¾‘ | ç´ æåº“ç»„è£… |

### âœ… 3. Resolve è‡ªåŠ¨å¯¼å…¥

#### å¯¼å…¥æµç¨‹
1. **æ£€æŸ¥ Resolve çŠ¶æ€** - æ˜¯å¦å¯åŠ¨ä¸”æ‰“å¼€é¡¹ç›®
2. **å¯¼å…¥ç´ æåˆ° Media Pool** - è‡ªåŠ¨ ImportMedia
3. **UI æ˜¾ç¤ºçŠ¶æ€** - "âœ“ å·²åŒæ­¥åˆ°å‰ªè¾‘å¼•æ“"

#### å®Œæˆæ¡ä»¶å‡çº§
- âŒ æ—§ï¼šä»…ä¿å­˜æ–‡ä»¶
- âœ… æ–°ï¼šä¿å­˜æ–‡ä»¶ + å¯¼å…¥åˆ° Resolve + UI æ˜¾ç¤ºåŒæ­¥çŠ¶æ€

---

## ğŸ“ æ–°å¢æ–‡ä»¶

### æ ¸å¿ƒå®ç°
- âœ… `app/api/routes_assembly.py` - é›¶æ•£é•œå¤´ç»„è£… API
- âœ… `app/tools/resolve_importer.py` - Resolve è‡ªåŠ¨å¯¼å…¥å·¥å…·

### å‰ç«¯æ›´æ–°
- âœ… `app/static/app.html` - åŒå·¥ä½œæµ UI
- âœ… `app/static/app.js` - å·¥ä½œæµåˆ‡æ¢é€»è¾‘
- âœ… `app/static/style.css` - æ–°æ ·å¼

### ç¤ºä¾‹æ–‡ä»¶
- âœ… `examples/assets_manifest.json` - ç´ ææ¸…å•ç¤ºä¾‹
- âœ… `examples/script_outline.json` - è„šæœ¬å¤§çº²ç¤ºä¾‹

### æ–‡æ¡£
- âœ… `SCRIPT_ASSEMBLY_GUIDE.md` - é›¶æ•£é•œå¤´ç»„è£…æŒ‡å—
- âœ… `DUAL_WORKFLOW_UPDATE.md` - æœ¬æ–‡æ¡£

---

## ğŸ¯ UI æ›´æ–°

### å·¥ä½œæµé€‰æ‹©å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¤ é€‰æ‹©å·¥ä½œæµ                                    â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  ğŸ¬          â”‚  â”‚  ğŸï¸          â”‚            â”‚
â”‚  â”‚ å•è§†é¢‘å‰ªè¾‘    â”‚  â”‚ é›¶æ•£é•œå¤´ç»„è£…  â”‚            â”‚
â”‚  â”‚ ä¸Šä¼ æˆ–é€‰æ‹©ä¸€ä¸ªâ”‚  â”‚ ä»å¤šä¸ªç´ æç‰‡æ®µâ”‚            â”‚
â”‚  â”‚ å®Œæ•´è§†é¢‘è¿›è¡Œ  â”‚  â”‚ ç»„è£…æˆå®Œæ•´è§†é¢‘â”‚            â”‚
â”‚  â”‚ æ™ºèƒ½å‰ªè¾‘      â”‚  â”‚              â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å•è§†é¢‘æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¹ è§†é¢‘æ¥æº                                      â”‚
â”‚                                                 â”‚
â”‚  ( ) ğŸ“ æœ¬åœ°æ–‡ä»¶ï¼ˆæ¨èï¼‰                         â”‚
â”‚  ( ) â˜ï¸ ä¸Šä¼ æ–‡ä»¶ï¼ˆæœ€å¤§ 2GBï¼‰                     â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼š                            â”‚   â”‚
â”‚  â”‚ [C:\Videos\my_video.mp4] [æµè§ˆ...]       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚  ğŸ’¡ æç¤ºï¼šé€‰æ‹©æœ¬åœ°æ–‡ä»¶æ— éœ€ä¸Šä¼ ï¼Œå¤„ç†æ›´å¿«          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é›¶æ•£é•œå¤´æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸï¸ ç´ ææ¸…å•                                     â”‚
â”‚                                                 â”‚
â”‚  ç´ ææ¸…å•æ–‡ä»¶ï¼ˆassets_manifest.jsonï¼‰ï¼š          â”‚
â”‚  [é€‰æ‹©æ–‡ä»¶...]                                   â”‚
â”‚  ğŸ“‹ åŒ…å«æ‰€æœ‰ç´ æç‰‡æ®µçš„è·¯å¾„å’Œå…ƒæ•°æ®                â”‚
â”‚                                                 â”‚
â”‚  è„šæœ¬å¤§çº²ï¼ˆå¯é€‰ï¼Œscript_outline.jsonï¼‰ï¼š         â”‚
â”‚  [é€‰æ‹©æ–‡ä»¶...]                                   â”‚
â”‚  ğŸ“ æŒ‡å®šç´ æçš„ç»„è£…é¡ºåºå’Œé€»è¾‘                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ API æ›´æ–°

### æ–°å¢ API

#### åˆ›å»ºç»„è£…é¡¹ç›®
```
POST /api/assembly/create
```

**å‚æ•°**ï¼š
- `assets_manifest` (file) - ç´ ææ¸…å•æ–‡ä»¶
- `script_outline` (file, optional) - è„šæœ¬å¤§çº²æ–‡ä»¶
- `platform` (string) - å¹³å°é€‰æ‹©
- `style` (string) - é£æ ¼é€‰æ‹©

**å“åº”**ï¼š
```json
{
  "project_id": "asm_20260205_143000",
  "status": "processing",
  "workflow": "script_assembly",
  "message": "é¡¹ç›®åˆ›å»ºæˆåŠŸï¼Œæ­£åœ¨å¤„ç†ä¸­..."
}
```

#### è·å–ç»„è£…çŠ¶æ€
```
GET /api/assembly/{project_id}/status
```

**å“åº”**ï¼š
```json
{
  "project_id": "asm_20260205_143000",
  "workflow": "script_assembly",
  "status": "processing",
  "progress": 65,
  "current_step": "dsl_generation"
}
```

### æ›´æ–°çš„ API

#### åˆ›å»ºé¡¹ç›®ï¼ˆå•è§†é¢‘ï¼‰
```
POST /api/projects/create
```

**æ–°å¢æ­¥éª¤**ï¼š
- æ­¥éª¤ 1.5: å¯¼å…¥ç´ æåˆ° Resolve
- UI æ˜¾ç¤º: "âœ“ å·²åŒæ­¥åˆ°å‰ªè¾‘å¼•æ“ (é¡¹ç›®åç§°)"

---

## ğŸ“Š å¤„ç†æµç¨‹

### å•è§†é¢‘å‰ªè¾‘æµç¨‹

```
ç”¨æˆ·é€‰æ‹©è§†é¢‘ï¼ˆæœ¬åœ°/ä¸Šä¼ ï¼‰
    â†“
POST /api/projects/create
    â†“
åå°å¤„ç†:
  1. ä¿å­˜/ä¸Šä¼ è§†é¢‘
  2. æå–éŸ³é¢‘
  3. âœ¨ å¯¼å…¥åˆ° Resolve Media Pool
  4. è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰
  5. åœºæ™¯æ£€æµ‹
  6. AI ç”Ÿæˆ DSL
  7. æ‰§è¡Œå‰ªè¾‘
  8. ç”Ÿæˆé¢„è§ˆ
    â†“
å®Œæˆ
```

### é›¶æ•£é•œå¤´ç»„è£…æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ ç´ ææ¸…å• + è„šæœ¬å¤§çº²
    â†“
POST /api/assembly/create
    â†“
åå°å¤„ç†:
  1. éªŒè¯ç´ ææ–‡ä»¶
  2. âœ¨ å¯¼å…¥æ‰€æœ‰ç´ æåˆ° Resolve
  3. AI ç”Ÿæˆç»„è£… DSLï¼ˆä½¿ç”¨ asset_idï¼‰
  4. æ‰§è¡Œç»„è£…
  5. ç”Ÿæˆé¢„è§ˆ
    â†“
å®Œæˆ
```

---

## ğŸ› ï¸ Resolve è‡ªåŠ¨å¯¼å…¥

### ResolveImporter ç±»

```python
from app.tools.resolve_importer import get_importer

importer = get_importer()

# æ£€æŸ¥ Resolve çŠ¶æ€
status = importer.check_resolve_status()
# {
#   "connected": True,
#   "project_name": "My Project",
#   "media_pool_items": 10
# }

# å¯¼å…¥å•ä¸ªæ–‡ä»¶
result = importer.import_media(["C:/Videos/video.mp4"])

# ä»æ¸…å•å¯¼å…¥
result = importer.import_from_manifest("assets_manifest.json")

# å¯¼å…¥åˆ°æŒ‡å®š bin
result = importer.import_to_bin(
    ["video1.mp4", "video2.mp4"],
    "My Clips"
)
```

### å¯¼å…¥çŠ¶æ€æ˜¾ç¤º

#### UI æ˜¾ç¤º

```
[ è¿›åº¦æ—¶é—´çº¿ ]
âœ” è§†é¢‘å·²å¯¼å…¥
âœ” éŸ³é¢‘å·²åˆ†æ
âœ” âœ¨ å·²åŒæ­¥åˆ°å‰ªè¾‘å¼•æ“ (My Project)
â–¶ åœºæ™¯å·²æ‹†åˆ†
â—‹ AI æ­£åœ¨ç”Ÿæˆå‰ªè¾‘æ–¹æ¡ˆ
â—‹ æ­£åœ¨è‡ªåŠ¨å‰ªè¾‘
```

#### å¦‚æœ Resolve æœªå¯åŠ¨

```
[ è¿›åº¦æ—¶é—´çº¿ ]
âœ” è§†é¢‘å·²å¯¼å…¥
âœ” éŸ³é¢‘å·²åˆ†æ
âš ï¸ DaVinci Resolve æœªå¯åŠ¨ï¼Œè·³è¿‡åŒæ­¥
â–¶ åœºæ™¯å·²æ‹†åˆ†
â—‹ AI æ­£åœ¨ç”Ÿæˆå‰ªè¾‘æ–¹æ¡ˆ
â—‹ æ­£åœ¨è‡ªåŠ¨å‰ªè¾‘
```

---

## ğŸ“ ç´ ææ¸…å•æ ¼å¼

### assets_manifest.json

```json
{
  "manifest_version": "1.0",
  "project_name": "æˆ‘çš„é¡¹ç›®",
  "assets": [
    {
      "asset_id": "asset_001",
      "path": "C:/Videos/clips/intro.mp4",
      "type": "video",
      "duration_seconds": 5.2,
      "duration_frames": 156,
      "fps": 30,
      "resolution": "1920x1080",
      "metadata": {
        "description": "å¼€åœºé•œå¤´",
        "tags": ["intro", "hook"],
        "quality": "high"
      }
    }
  ]
}
```

**å¿…å¡«å­—æ®µ**ï¼š
- `asset_id` - ç´ æå”¯ä¸€æ ‡è¯†
- `path` - ç´ ææ–‡ä»¶è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰
- `type` - ç´ æç±»å‹ï¼ˆvideo/audio/imageï¼‰
- `duration_frames` - æ—¶é•¿ï¼ˆå¸§æ•°ï¼‰

### script_outline.json

```json
{
  "script_version": "1.0",
  "structure": {
    "intro": {
      "description": "å¼€åœºéƒ¨åˆ†",
      "assets": ["asset_001"]
    },
    "main_content": {
      "sections": [
        {"assets": ["asset_002"]},
        {"assets": ["asset_003"]}
      ]
    },
    "outro": {
      "assets": ["asset_004"]
    }
  }
}
```

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæœ¬åœ°æ–‡ä»¶å‰ªè¾‘

1. é€‰æ‹© **ğŸ¬ å•è§†é¢‘å‰ªè¾‘**
2. é€‰æ‹© **ğŸ“ æœ¬åœ°æ–‡ä»¶**
3. æµè§ˆå¹¶é€‰æ‹© `C:\Videos\my_video.mp4`
4. é€‰æ‹©å¹³å°å’Œé£æ ¼
5. ç‚¹å‡» **âœ¨ å¼€å§‹ AI å‰ªè¾‘**

### ç¤ºä¾‹ 2ï¼šä¸Šä¼ æ–‡ä»¶å‰ªè¾‘

1. é€‰æ‹© **ğŸ¬ å•è§†é¢‘å‰ªè¾‘**
2. é€‰æ‹© **â˜ï¸ ä¸Šä¼ æ–‡ä»¶**
3. æ‹–æ‹½è§†é¢‘åˆ°ä¸Šä¼ åŒºåŸŸ
4. é€‰æ‹©å¹³å°å’Œé£æ ¼
5. ç‚¹å‡» **âœ¨ å¼€å§‹ AI å‰ªè¾‘**

### ç¤ºä¾‹ 3ï¼šé›¶æ•£é•œå¤´ç»„è£…

1. é€‰æ‹© **ğŸï¸ é›¶æ•£é•œå¤´ç»„è£…**
2. ä¸Šä¼  `assets_manifest.json`
3. ï¼ˆå¯é€‰ï¼‰ä¸Šä¼  `script_outline.json`
4. é€‰æ‹©å¹³å°å’Œé£æ ¼
5. ç‚¹å‡» **âœ¨ å¼€å§‹ AI å‰ªè¾‘**

---

## ğŸ” DSL å·®å¼‚

### å•è§†é¢‘å‰ªè¾‘ DSL

```json
{
  "editing_plan": {
    "timeline": [
      {
        "scene_id": "scene_001",
        "trim_frames": [0, 150],
        "speed": 1.0
      }
    ]
  }
}
```

### é›¶æ•£é•œå¤´ç»„è£… DSL

```json
{
  "editing_plan": {
    "timeline": [
      {
        "asset_id": "asset_001",
        "trim_frames": [0, 150],
        "speed": 1.0
      }
    ]
  }
}
```

**å…³é”®å·®å¼‚**ï¼š
- `scene_id` â†’ `asset_id`
- ç´ ææ¥è‡ªä¸åŒæ–‡ä»¶

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… æ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©
- âœ… æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼ˆ2GB é™åˆ¶ï¼‰
- âœ… æ”¯æŒé›¶æ•£é•œå¤´ç»„è£…
- âœ… è‡ªåŠ¨å¯¼å…¥åˆ° Resolve
- âœ… UI æ˜¾ç¤ºåŒæ­¥çŠ¶æ€

### ç”¨æˆ·ä½“éªŒ
- âœ… å·¥ä½œæµåˆ‡æ¢æµç•…
- âœ… æ–‡ä»¶é€‰æ‹©æ–¹ä¾¿
- âœ… è¿›åº¦æ˜¾ç¤ºæ¸…æ™°
- âœ… é”™è¯¯æç¤ºå‹å¥½

### æŠ€æœ¯å®ç°
- âœ… Resolve è¿æ¥æ£€æµ‹
- âœ… è‡ªåŠ¨å¯¼å…¥ Media Pool
- âœ… asset_id æ˜ å°„ç®¡ç†
- âœ… é”™è¯¯å¤„ç†å®Œå–„

---

## ğŸš€ ä¸‹ä¸€æ­¥

### å¾…ä¼˜åŒ–
1. **æ‰¹é‡å¯¼å…¥** - æ”¯æŒä¸€æ¬¡å¯¼å…¥å¤šä¸ªé¡¹ç›®
2. **å¯¼å…¥è¿›åº¦** - æ˜¾ç¤ºå¯¼å…¥è¿›åº¦æ¡
3. **bin ç®¡ç†** - è‡ªåŠ¨åˆ›å»ºé¡¹ç›®ä¸“ç”¨ bin
4. **å†²çªæ£€æµ‹** - æ£€æµ‹é‡å¤ç´ æ

### å¾…é›†æˆ
1. **Whisper ASR** - è¯­éŸ³è¯†åˆ«
2. **PySceneDetect** - åœºæ™¯æ£€æµ‹
3. **å®é™…å‰ªè¾‘æ‰§è¡Œ** - Resolve API è°ƒç”¨

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `SCRIPT_ASSEMBLY_GUIDE.md` - é›¶æ•£é•œå¤´ç»„è£…è¯¦ç»†æŒ‡å—
- `IMPLEMENTATION_COMPLETE.md` - äº§å“çº§å®ç°æ€»ç»“
- `QUICK_START_V2.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—
- `examples/assets_manifest.json` - ç´ ææ¸…å•ç¤ºä¾‹
- `examples/script_outline.json` - è„šæœ¬å¤§çº²ç¤ºä¾‹

---

**ç‰ˆæœ¬**: v1.7.0  
**æ—¥æœŸ**: 2026-02-05  
**çŠ¶æ€**: âœ… å·²å®ç°  
**æœåŠ¡å™¨**: âœ… è¿è¡Œä¸­ (http://localhost:8787)
